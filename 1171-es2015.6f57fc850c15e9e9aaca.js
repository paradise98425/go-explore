(self.webpackChunkgo_explore=self.webpackChunkgo_explore||[]).push([[1171],{1171:function(t,o,e){"use strict";e.r(o),e.d(o,{Tab1PageModule:function(){return u}});var n=e(4683),i=e(6274),s=e(4988),a=e(9370),r=e(2717),l=e(3606),c=e(1074),d=e(1887);const p=["map"],g=[{path:"",component:(()=>{class t{constructor(t,o,e){this.geolocation=t,this.http=o,this.router=e,this.infowindows=[]}ngOnInit(){this.http.get("http://localhost:3000/api/users/locations").subscribe(t=>{this.markers=t.locations}),this.geoInformation()}geoInformation(){this.geolocation.getCurrentPosition().then(t=>{this.lat=t.coords.latitude,this.long=t.coords.longitude,this.accuracy=t.coords.accuracy,this.markers.push({name:"Your current location",lat:t.coords.latitude,lon:t.coords.longitude})})}ionViewDidEnter(){this.showMap()}addMarkersToMap(t){for(let o of t){let t=new google.maps.LatLng(o.lat,o.lon),e=new google.maps.Marker({position:t,title:o.name,latitude:o.lat,longitude:o.lon,animation:google.maps.Animation.DROP});e.setMap(this.map),this.addInfoWindowToMarker(e)}}addInfoWindowToMarker(t){let o=new google.maps.InfoWindow({content:'<div id="content"><h2 id="firstHeading" class="firstHeading">'+t.title+"</h2><p>Latitude: "+t.latitude+"</p><p>Longitude: "+t.longitude+'</p><ion-button id="navigate">Go scan</ion-button></div>'});t.addListener("click",()=>{this.closeAllInfoWindows(),o.open(this.map,t),google.maps.event.addListenerOnce(o,"domready",()=>{document.getElementById("navigate").addEventListener("click",()=>{this.router.navigate(["../tabs/tab2"])})})}),this.infowindows.push(o)}closeAllInfoWindows(){for(let t of this.infowindows)t.close()}showMap(){const t=new google.maps.LatLng(this.lat,this.long);this.map=new google.maps.Map(this.mapRef.nativeElement,{center:t,zoom:9,disableDefaultUI:!0}),this.addMarkersToMap(this.markers)}}return t.\u0275fac=function(o){return new(o||t)(l.Y36(c.b),l.Y36(d.eN),l.Y36(r.F0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-tab1"]],viewQuery:function(t,o){if(1&t&&l.Gf(p,5,l.SBq),2&t){let t;l.iGM(t=l.CRH())&&(o.mapRef=t.first)}},decls:6,vars:2,consts:[[3,"translucent"],["color","primary"],["id","logo","src","../assets/img/go-explore-logo-white.png",1,"ion-padding"],[3,"fullscreen"],["id","map",2,"height","100%"],["map",""]],template:function(t,o){1&t&&(l.TgZ(0,"ion-header",0),l.TgZ(1,"ion-toolbar",1),l._UZ(2,"ion-img",2),l.qZA(),l.qZA(),l.TgZ(3,"ion-content",3),l._UZ(4,"div",4,5),l.qZA()),2&t&&(l.Q6J("translucent",!0),l.xp6(3),l.Q6J("fullscreen",!0))},directives:[n.Gu,n.sr,n.Xz,n.W2],styles:["#map[_ngcontent-%COMP%]{height:100%;width:100%}.i4ewOd-pzNkMb-haAclf[_ngcontent-%COMP%]{display:none}#logo[_ngcontent-%COMP%]{height:100px}"]}),t})()}];let h=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[r.Bz.forChild(g)],r.Bz]}),t})(),u=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[n.Pc,i.ez,s.u5,a.e,h]]}),t})()}}]);